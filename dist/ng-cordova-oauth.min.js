!function(){"use strict";function e(e,t,n){return{signin:function(t,o,r){var a=e.defer(),i={code:"?",token:"#"};if(window.cordova)if(n.isInAppBrowserInstalled()){var s="http://localhost/callback",c="token";void 0!==r&&(r.hasOwnProperty("redirect_uri")&&(s=r.redirect_uri),r.hasOwnProperty("response_type")&&(c=r.response_type));var u="";o&&o.length>0&&(u="&scope="+o.join("+"));var l="https://api.instagram.com/oauth/authorize/?client_id="+t+u+"&response_type="+c+"&redirect_uri="+s,d=window.cordova.InAppBrowser.open(l,"_blank","location=no,clearsessioncache=yes,clearcache=yes,closebuttoncaption=back,toolbarcolor=#ffffff,presentationstyle=formsheet,toolbarposition=top");d.addEventListener("loadstart",function(e){if(0===e.url.indexOf(s)){d.removeEventListener("exit",function(e){}),d.close();var t=e.url.split(i[c])[1],o=n.parseResponseParameters(t);o.access_token?a.resolve({access_token:o.access_token}):void 0!==o.code&&null!==o.code?a.resolve({code:o.code}):a.reject("Problem authenticating")}else"https://www.instagram.com/"===e.url&&d.executeScript({code:"window.location = '"+l+"';"})}),d.addEventListener("exit",function(e){a.reject("The sign in flow was canceled")}),d.addEventListener("loadstop",function(){console.log("browser load stop"),d.insertCSS({code:"#react-root {padding-top: 20px}"})})}else a.reject("Could not find InAppBrowser plugin");else a.reject("Cannot authenticate via a web browser");return a.promise}}}angular.module("oauth.instagram",["oauth.utils"]).factory("$ngCordovaInstagram",e),e.$inject=["$q","$http","$cordovaOauthUtility"]}(),function(){"use strict";function e(e,t,n,o){return{instagram:o.signin}}angular.module("oauth.providers",["oauth.utils","oauth.instagram"]).factory("$cordovaOauth",e),e.$inject=["$q","$http","$cordovaOauthUtility","$ngCordovaInstagram"]}(),angular.module("ngCordovaOauth",["oauth.providers","oauth.utils"]),function(){function e(e){return{isInAppBrowserInstalled:function(){var e=cordova.require("cordova/plugin_list"),t=["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"];{if(0===Object.keys(e.metadata).length){var n=e.map(function(e){return e.id||e.pluginId});return t.some(function(e){return-1!=n.indexOf(e)})}return t.some(function(t){return e.metadata.hasOwnProperty(t)})}},createSignature:function(e,t,n,o,r,a){{if("undefined"!=typeof jsSHA){for(var i=angular.copy(n),s=Object.keys(o),c=0;c<s.length;c++)i[s[c]]=encodeURIComponent(o[s[c]]);var u=e+"&"+encodeURIComponent(t)+"&",l=Object.keys(i).sort();for(c=0;c<l.length;c++)c==l.length-1?u+=encodeURIComponent(l[c]+"="+i[l[c]]):u+=encodeURIComponent(l[c]+"="+i[l[c]]+"&");var d=new jsSHA(u,"TEXT"),p="";a&&(p=encodeURIComponent(a)),n.oauth_signature=encodeURIComponent(d.getHMAC(encodeURIComponent(r)+"&"+p,"TEXT","SHA-1","B64"));var h=Object.keys(n),g="OAuth ";for(c=0;c<h.length;c++)c==h.length-1?g+=h[c]+'="'+n[h[c]]+'"':g+=h[c]+'="'+n[h[c]]+'",';return{signature_base_string:u,authorization_header:g,signature:n.oauth_signature}}return"Missing jsSHA JavaScript library"}},createNonce:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},generateUrlParameters:function(e){var t=Object.keys(e);t.sort();for(var n="",o="",r=0;r<t.length;r++)n+=o+t[r]+"="+e[t[r]],o="&";return n},parseResponseParameters:function(e){{if(e.split){for(var t=e.split("&"),n={},o=0;o<t.length;o++)n[t[o].split("=")[0]]=t[o].split("=")[1];return n}return{}}},generateOauthParametersInstance:function(e){var t=new jsSHA(Math.round((new Date).getTime()/1e3),"TEXT");return{oauth_consumer_key:e,oauth_nonce:t.getHash("SHA-1","HEX"),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"}}}}angular.module("oauth.utils",[]).factory("$cordovaOauthUtility",e),e.$inject=["$q"]}();
